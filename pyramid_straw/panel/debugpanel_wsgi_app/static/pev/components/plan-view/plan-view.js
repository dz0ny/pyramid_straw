var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('angular2/core');
var router_1 = require('angular2/router');
var enums_1 = require('../../enums');
var plan_node_1 = require('../plan-node/plan-node');
var plan_service_1 = require('../../services/plan-service');
var syntax_highlight_service_1 = require('../../services/syntax-highlight-service');
var pipes_1 = require('../../pipes');
var PlanView = (function () {
    function PlanView(_planService, routeParams) {
        this._planService = _planService;
        this.hideMenu = true;
        this.viewOptions = {
            showPlanStats: true,
            showHighlightBar: true,
            showPlannerEstimate: false,
            showTags: true,
            highlightType: enums_1.HighlightType.NONE,
            viewMode: enums_1.ViewMode.FULL
        };
        this.showPlannerEstimate = true;
        this.showMenu = false;
        this.highlightTypes = enums_1.HighlightType;
        this.viewModes = enums_1.ViewMode;
        this.id = routeParams.get('id');
    }
    PlanView.prototype.getPlan = function () {
        if (!this.id) {
            return;
        }
        this.plan = this._planService.getPlan(this.id);
        this.rootContainer = this.plan.content;
        this.plan.planStats = {
            executionTime: this.rootContainer['Execution Time'] || this.rootContainer['Total Runtime'],
            planningTime: this.rootContainer['Planning Time'] || 0,
            maxRows: this.rootContainer[this._planService.MAXIMUM_ROWS_PROP] || 0,
            maxCost: this.rootContainer[this._planService.MAXIMUM_COSTS_PROP] || 0,
            maxDuration: this.rootContainer[this._planService.MAXIMUM_DURATION_PROP] || 0
        };
    };
    PlanView.prototype.ngOnInit = function () {
        this.getPlan();
    };
    PlanView.prototype.toggleHighlight = function (type) {
        this.viewOptions.highlightType = type;
    };
    PlanView.prototype.analyzePlan = function () {
        this._planService.analyzePlan(this.plan);
    };
    PlanView = __decorate([
        core_1.Component({
            selector: 'plan-view',
            template: "\n      <div class=\"menu\" [class.menu-hidden]=\"hideMenu\">\n         <header>\n            <i class=\"fa fa-cogs menu-toggle\" (click)=\"hideMenu = !hideMenu\"></i>\n            <h3>display options</h3>\n         </header>\n\n         <ul>\n            <li>\n               <input id=\"showPlanStats\" type=\"checkbox\" [(ngModel)]=\"viewOptions.showPlanStats\">\n               <label class=\"clickable\" for=\"showPlanStats\"> show plan stats</label>\n            </li>\n            <li>\n               <input id=\"showPlannerEstimate\" type=\"checkbox\" [(ngModel)]=\"viewOptions.showPlannerEstimate\">\n               <label class=\"clickable\" for=\"showPlannerEstimate\"> show planner estimate</label>\n            </li>\n            <li>\n               <input id=\"showTags\" type=\"checkbox\" [(ngModel)]=\"viewOptions.showTags\">\n               <label class=\"clickable\" for=\"showTags\"> show analysis tags</label>\n            </li>\n            <li>\n               <label>view mode: </label>\n               <div class=\"button-group\">\n                  <button [class.selected]=\"viewOptions.viewMode == viewModes.FULL\" (click)=\"viewOptions.viewMode = viewModes.FULL\">full</button>\n                  <button [class.selected]=\"viewOptions.viewMode == viewModes.COMPACT\" (click)=\"viewOptions.viewMode = viewModes.COMPACT\">compact</button>\n                  <button [class.selected]=\"viewOptions.viewMode == viewModes.DOT\" (click)=\"viewOptions.viewMode = viewModes.DOT\">dot</button>\n               </div>\n            </li>\n\n            <li>\n               <label>graph metric: </label>\n               <div class=\"button-group\">\n                  <button [class.selected]=\"viewOptions.highlightType === highlightTypes.NONE\" (click)=\"viewOptions.highlightType = highlightTypes.NONE\">none</button>\n                  <button [class.selected]=\"viewOptions.highlightType === highlightTypes.DURATION\" (click)=\"viewOptions.highlightType = highlightTypes.DURATION\">duration</button>\n                  <button [class.selected]=\"viewOptions.highlightType === highlightTypes.ROWS\" (click)=\"viewOptions.highlightType = highlightTypes.ROWS\">rows</button>\n                  <button [class.selected]=\"viewOptions.highlightType === highlightTypes.COST\" (click)=\"viewOptions.highlightType = highlightTypes.COST\">cost</button>\n               </div>\n            </li>\n         </ul>\n      </div>\n\n      <div class=\"page page-stretch\">\n         <h2><span *ngIf=\"!editName\">{{plan.name}}</span>\n            <input *ngIf=\"editName\" class=\"input-box input-box-main\" type=\"text\" [(ngModel)]=\"plan.name\">\n            <button class=\"btn btn-link btn-lg\" (click) = \"editName = !editName\">\n               <i class=\"fa fa-pencil\"></i>\n            </button>\n         </h2>\n\n         <div *ngIf=\"viewOptions.showPlanStats\" class=\"plan-stats\">\n            <div>\n               <span class=\"stat-value\">{{plan.planStats.executionTime | duration}}</span>\n               <span class=\"stat-label\">execution time ({{plan.planStats.executionTime | durationUnit}})</span>\n            </div>\n            <div *ngIf=\"plan.planStats.planningTime\">\n               <span class=\"stat-value\">{{plan.planStats.planningTime | number:'.0-2'}}</span>\n               <span class=\"stat-label\">planning time (ms)</span>\n            </div>\n            <div *ngIf=\"plan.planStats.maxDuration\">\n               <span class=\"stat-value\">{{plan.planStats.maxDuration | duration}}</span>\n               <span class=\"stat-label\">slowest node ({{plan.planStats.maxDuration | durationUnit}})</span>\n            </div>\n            <div *ngIf=\"plan.planStats.maxRows\">\n               <span class=\"stat-value\">{{plan.planStats.maxRows | number:'.0-2'}}</span>\n               <span class=\"stat-label\">largest node (rows)</span>\n            </div>\n            <div *ngIf=\"plan.planStats.maxCost\">\n               <span class=\"stat-value\">{{plan.planStats.maxCost | number:'.0-2'}}</span>\n               <span class=\"stat-label\">costliest node</span>\n            </div>\n            <div class=\"btn-close\" (click)=\"viewOptions.showPlanStats = false\"><i class=\"fa fa-close\"></i></div>\n         </div>\n\n         <div class=\"plan\">\n            <ul>\n               <li>\n                  <plan-node [plan]=\"plan\" [node]=\"rootContainer.Plan\" [viewOptions]=\"viewOptions\"></plan-node>\n               </li>\n            </ul>\n         </div>\n      </div>\n    ",
            directives: [router_1.ROUTER_DIRECTIVES, plan_node_1.PlanNode],
            providers: [plan_service_1.PlanService, syntax_highlight_service_1.SyntaxHighlightService],
            pipes: [pipes_1.DurationPipe, pipes_1.DurationUnitPipe]
        }), 
        __metadata('design:paramtypes', [plan_service_1.PlanService, router_1.RouteParams])
    ], PlanView);
    return PlanView;
})();
exports.PlanView = PlanView;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcGxhbi12aWV3L3BsYW4tdmlldy50cyJdLCJuYW1lcyI6WyJQbGFuVmlldyIsIlBsYW5WaWV3LmNvbnN0cnVjdG9yIiwiUGxhblZpZXcuZ2V0UGxhbiIsIlBsYW5WaWV3Lm5nT25Jbml0IiwiUGxhblZpZXcudG9nZ2xlSGlnaGxpZ2h0IiwiUGxhblZpZXcuYW5hbHl6ZVBsYW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLHFCQUFnQyxlQUFlLENBQUMsQ0FBQTtBQUNoRCx1QkFBNkMsaUJBQWlCLENBQUMsQ0FBQTtBQUcvRCxzQkFBc0MsYUFBYSxDQUFDLENBQUE7QUFDcEQsMEJBQXVCLHdCQUF3QixDQUFDLENBQUE7QUFDaEQsNkJBQTBCLDZCQUE2QixDQUFDLENBQUE7QUFDeEQseUNBQXFDLHlDQUF5QyxDQUFDLENBQUE7QUFDL0Usc0JBQTZDLGFBQWEsQ0FBQyxDQUFBO0FBRTNEO0lBNkdJQSxrQkFBb0JBLFlBQXlCQSxFQUFFQSxXQUF3QkE7UUFBbkRDLGlCQUFZQSxHQUFaQSxZQUFZQSxDQUFhQTtRQWpCN0NBLGFBQVFBLEdBQVlBLElBQUlBLENBQUNBO1FBRXpCQSxnQkFBV0EsR0FBUUE7WUFDZkEsYUFBYUEsRUFBRUEsSUFBSUE7WUFDbkJBLGdCQUFnQkEsRUFBRUEsSUFBSUE7WUFDdEJBLG1CQUFtQkEsRUFBRUEsS0FBS0E7WUFDMUJBLFFBQVFBLEVBQUVBLElBQUlBO1lBQ2RBLGFBQWFBLEVBQUVBLHFCQUFhQSxDQUFDQSxJQUFJQTtZQUNqQ0EsUUFBUUEsRUFBRUEsZ0JBQVFBLENBQUNBLElBQUlBO1NBQzFCQSxDQUFDQTtRQUVGQSx3QkFBbUJBLEdBQVlBLElBQUlBLENBQUNBO1FBQ3BDQSxhQUFRQSxHQUFZQSxLQUFLQSxDQUFDQTtRQUUxQkEsbUJBQWNBLEdBQUdBLHFCQUFhQSxDQUFDQTtRQUMvQkEsY0FBU0EsR0FBR0EsZ0JBQVFBLENBQUNBO1FBR2pCQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFHQSxXQUFXQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUNwQ0EsQ0FBQ0E7SUFFREQsMEJBQU9BLEdBQVBBO1FBQ0lFLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ1hBLE1BQU1BLENBQUNBO1FBQ1hBLENBQUNBO1FBRURBLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQTtRQUN2Q0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0E7WUFDbEJBLGFBQWFBLEVBQUVBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsZUFBZUEsQ0FBQ0E7WUFDMUZBLFlBQVlBLEVBQUVBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBO1lBQ3REQSxPQUFPQSxFQUFFQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxpQkFBaUJBLENBQUNBLElBQUlBLENBQUNBO1lBQ3JFQSxPQUFPQSxFQUFFQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxrQkFBa0JBLENBQUNBLElBQUlBLENBQUNBO1lBQ3RFQSxXQUFXQSxFQUFFQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBO1NBQ2hGQSxDQUFDQTtJQUNOQSxDQUFDQTtJQUVERiwyQkFBUUEsR0FBUkE7UUFDSUcsSUFBSUEsQ0FBQ0EsT0FBT0EsRUFBRUEsQ0FBQ0E7SUFDbkJBLENBQUNBO0lBRURILGtDQUFlQSxHQUFmQSxVQUFnQkEsSUFBbUJBO1FBQy9CSSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQTtJQUMxQ0EsQ0FBQ0E7SUFFREosOEJBQVdBLEdBQVhBO1FBQ0lLLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBQzdDQSxDQUFDQTtJQTNJTEw7UUFBQ0EsZ0JBQVNBLENBQUNBO1lBQ1BBLFFBQVFBLEVBQUVBLFdBQVdBO1lBQ3JCQSxRQUFRQSxFQUFFQSx1OElBaUZUQTtZQUNEQSxVQUFVQSxFQUFFQSxDQUFDQSwwQkFBaUJBLEVBQUVBLG9CQUFRQSxDQUFDQTtZQUN6Q0EsU0FBU0EsRUFBRUEsQ0FBQ0EsMEJBQVdBLEVBQUVBLGlEQUFzQkEsQ0FBQ0E7WUFDaERBLEtBQUtBLEVBQUVBLENBQUNBLG9CQUFZQSxFQUFFQSx3QkFBZ0JBLENBQUNBO1NBQzFDQSxDQUFDQTs7aUJBcUREQTtJQUFEQSxlQUFDQTtBQUFEQSxDQTVJQSxBQTRJQ0EsSUFBQTtBQXBEWSxnQkFBUSxXQW9EcEIsQ0FBQSIsImZpbGUiOiJjb21wb25lbnRzL3BsYW4tdmlldy9wbGFuLXZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgT25Jbml0fSBmcm9tICdhbmd1bGFyMi9jb3JlJztcbmltcG9ydCB7Uk9VVEVSX0RJUkVDVElWRVMsIFJvdXRlUGFyYW1zfSBmcm9tICdhbmd1bGFyMi9yb3V0ZXInO1xuXG5pbXBvcnQge0lQbGFufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL2lwbGFuJztcbmltcG9ydCB7SGlnaGxpZ2h0VHlwZSwgVmlld01vZGV9IGZyb20gJy4uLy4uL2VudW1zJztcbmltcG9ydCB7UGxhbk5vZGV9IGZyb20gJy4uL3BsYW4tbm9kZS9wbGFuLW5vZGUnO1xuaW1wb3J0IHtQbGFuU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvcGxhbi1zZXJ2aWNlJztcbmltcG9ydCB7U3ludGF4SGlnaGxpZ2h0U2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvc3ludGF4LWhpZ2hsaWdodC1zZXJ2aWNlJztcbmltcG9ydCB7RHVyYXRpb25QaXBlLCBEdXJhdGlvblVuaXRQaXBlfSBmcm9tICcuLi8uLi9waXBlcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAncGxhbi12aWV3JyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgPGRpdiBjbGFzcz1cIm1lbnVcIiBbY2xhc3MubWVudS1oaWRkZW5dPVwiaGlkZU1lbnVcIj5cbiAgICAgICAgIDxoZWFkZXI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNvZ3MgbWVudS10b2dnbGVcIiAoY2xpY2spPVwiaGlkZU1lbnUgPSAhaGlkZU1lbnVcIj48L2k+XG4gICAgICAgICAgICA8aDM+ZGlzcGxheSBvcHRpb25zPC9oMz5cbiAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJzaG93UGxhblN0YXRzXCIgdHlwZT1cImNoZWNrYm94XCIgWyhuZ01vZGVsKV09XCJ2aWV3T3B0aW9ucy5zaG93UGxhblN0YXRzXCI+XG4gICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjbGlja2FibGVcIiBmb3I9XCJzaG93UGxhblN0YXRzXCI+IHNob3cgcGxhbiBzdGF0czwvbGFiZWw+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgPGlucHV0IGlkPVwic2hvd1BsYW5uZXJFc3RpbWF0ZVwiIHR5cGU9XCJjaGVja2JveFwiIFsobmdNb2RlbCldPVwidmlld09wdGlvbnMuc2hvd1BsYW5uZXJFc3RpbWF0ZVwiPlxuICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiY2xpY2thYmxlXCIgZm9yPVwic2hvd1BsYW5uZXJFc3RpbWF0ZVwiPiBzaG93IHBsYW5uZXIgZXN0aW1hdGU8L2xhYmVsPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInNob3dUYWdzXCIgdHlwZT1cImNoZWNrYm94XCIgWyhuZ01vZGVsKV09XCJ2aWV3T3B0aW9ucy5zaG93VGFnc1wiPlxuICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiY2xpY2thYmxlXCIgZm9yPVwic2hvd1RhZ3NcIj4gc2hvdyBhbmFseXNpcyB0YWdzPC9sYWJlbD5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICA8bGFiZWw+dmlldyBtb2RlOiA8L2xhYmVsPlxuICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ1dHRvbi1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBbY2xhc3Muc2VsZWN0ZWRdPVwidmlld09wdGlvbnMudmlld01vZGUgPT0gdmlld01vZGVzLkZVTExcIiAoY2xpY2spPVwidmlld09wdGlvbnMudmlld01vZGUgPSB2aWV3TW9kZXMuRlVMTFwiPmZ1bGw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gW2NsYXNzLnNlbGVjdGVkXT1cInZpZXdPcHRpb25zLnZpZXdNb2RlID09IHZpZXdNb2Rlcy5DT01QQUNUXCIgKGNsaWNrKT1cInZpZXdPcHRpb25zLnZpZXdNb2RlID0gdmlld01vZGVzLkNPTVBBQ1RcIj5jb21wYWN0PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFtjbGFzcy5zZWxlY3RlZF09XCJ2aWV3T3B0aW9ucy52aWV3TW9kZSA9PSB2aWV3TW9kZXMuRE9UXCIgKGNsaWNrKT1cInZpZXdPcHRpb25zLnZpZXdNb2RlID0gdmlld01vZGVzLkRPVFwiPmRvdDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2xpPlxuXG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICA8bGFiZWw+Z3JhcGggbWV0cmljOiA8L2xhYmVsPlxuICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ1dHRvbi1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBbY2xhc3Muc2VsZWN0ZWRdPVwidmlld09wdGlvbnMuaGlnaGxpZ2h0VHlwZSA9PT0gaGlnaGxpZ2h0VHlwZXMuTk9ORVwiIChjbGljayk9XCJ2aWV3T3B0aW9ucy5oaWdobGlnaHRUeXBlID0gaGlnaGxpZ2h0VHlwZXMuTk9ORVwiPm5vbmU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gW2NsYXNzLnNlbGVjdGVkXT1cInZpZXdPcHRpb25zLmhpZ2hsaWdodFR5cGUgPT09IGhpZ2hsaWdodFR5cGVzLkRVUkFUSU9OXCIgKGNsaWNrKT1cInZpZXdPcHRpb25zLmhpZ2hsaWdodFR5cGUgPSBoaWdobGlnaHRUeXBlcy5EVVJBVElPTlwiPmR1cmF0aW9uPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFtjbGFzcy5zZWxlY3RlZF09XCJ2aWV3T3B0aW9ucy5oaWdobGlnaHRUeXBlID09PSBoaWdobGlnaHRUeXBlcy5ST1dTXCIgKGNsaWNrKT1cInZpZXdPcHRpb25zLmhpZ2hsaWdodFR5cGUgPSBoaWdobGlnaHRUeXBlcy5ST1dTXCI+cm93czwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBbY2xhc3Muc2VsZWN0ZWRdPVwidmlld09wdGlvbnMuaGlnaGxpZ2h0VHlwZSA9PT0gaGlnaGxpZ2h0VHlwZXMuQ09TVFwiIChjbGljayk9XCJ2aWV3T3B0aW9ucy5oaWdobGlnaHRUeXBlID0gaGlnaGxpZ2h0VHlwZXMuQ09TVFwiPmNvc3Q8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgIDwvdWw+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cInBhZ2UgcGFnZS1zdHJldGNoXCI+XG4gICAgICAgICA8aDI+PHNwYW4gKm5nSWY9XCIhZWRpdE5hbWVcIj57e3BsYW4ubmFtZX19PC9zcGFuPlxuICAgICAgICAgICAgPGlucHV0ICpuZ0lmPVwiZWRpdE5hbWVcIiBjbGFzcz1cImlucHV0LWJveCBpbnB1dC1ib3gtbWFpblwiIHR5cGU9XCJ0ZXh0XCIgWyhuZ01vZGVsKV09XCJwbGFuLm5hbWVcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLWxnXCIgKGNsaWNrKSA9IFwiZWRpdE5hbWUgPSAhZWRpdE5hbWVcIj5cbiAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICA8L2gyPlxuXG4gICAgICAgICA8ZGl2ICpuZ0lmPVwidmlld09wdGlvbnMuc2hvd1BsYW5TdGF0c1wiIGNsYXNzPVwicGxhbi1zdGF0c1wiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPnt7cGxhbi5wbGFuU3RhdHMuZXhlY3V0aW9uVGltZSB8IGR1cmF0aW9ufX08L3NwYW4+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5leGVjdXRpb24gdGltZSAoe3twbGFuLnBsYW5TdGF0cy5leGVjdXRpb25UaW1lIHwgZHVyYXRpb25Vbml0fX0pPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwicGxhbi5wbGFuU3RhdHMucGxhbm5pbmdUaW1lXCI+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj57e3BsYW4ucGxhblN0YXRzLnBsYW5uaW5nVGltZSB8IG51bWJlcjonLjAtMid9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPnBsYW5uaW5nIHRpbWUgKG1zKTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiAqbmdJZj1cInBsYW4ucGxhblN0YXRzLm1heER1cmF0aW9uXCI+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj57e3BsYW4ucGxhblN0YXRzLm1heER1cmF0aW9uIHwgZHVyYXRpb259fTwvc3Bhbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPnNsb3dlc3Qgbm9kZSAoe3twbGFuLnBsYW5TdGF0cy5tYXhEdXJhdGlvbiB8IGR1cmF0aW9uVW5pdH19KTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiAqbmdJZj1cInBsYW4ucGxhblN0YXRzLm1heFJvd3NcIj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPnt7cGxhbi5wbGFuU3RhdHMubWF4Um93cyB8IG51bWJlcjonLjAtMid9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPmxhcmdlc3Qgbm9kZSAocm93cyk8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJwbGFuLnBsYW5TdGF0cy5tYXhDb3N0XCI+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj57e3BsYW4ucGxhblN0YXRzLm1heENvc3QgfCBudW1iZXI6Jy4wLTInfX08L3NwYW4+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5jb3N0bGllc3Qgbm9kZTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1jbG9zZVwiIChjbGljayk9XCJ2aWV3T3B0aW9ucy5zaG93UGxhblN0YXRzID0gZmFsc2VcIj48aSBjbGFzcz1cImZhIGZhLWNsb3NlXCI+PC9pPjwvZGl2PlxuICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJwbGFuXCI+XG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICA8cGxhbi1ub2RlIFtwbGFuXT1cInBsYW5cIiBbbm9kZV09XCJyb290Q29udGFpbmVyLlBsYW5cIiBbdmlld09wdGlvbnNdPVwidmlld09wdGlvbnNcIj48L3BsYW4tbm9kZT5cbiAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgLFxuICAgIGRpcmVjdGl2ZXM6IFtST1VURVJfRElSRUNUSVZFUywgUGxhbk5vZGVdLFxuICAgIHByb3ZpZGVyczogW1BsYW5TZXJ2aWNlLCBTeW50YXhIaWdobGlnaHRTZXJ2aWNlXSxcbiAgICBwaXBlczogW0R1cmF0aW9uUGlwZSwgRHVyYXRpb25Vbml0UGlwZV1cbn0pXG5leHBvcnQgY2xhc3MgUGxhblZpZXcge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgcGxhbjogSVBsYW47XG4gICAgcm9vdENvbnRhaW5lcjogYW55O1xuICAgIGhpZGVNZW51OiBib29sZWFuID0gdHJ1ZTtcblxuICAgIHZpZXdPcHRpb25zOiBhbnkgPSB7XG4gICAgICAgIHNob3dQbGFuU3RhdHM6IHRydWUsXG4gICAgICAgIHNob3dIaWdobGlnaHRCYXI6IHRydWUsXG4gICAgICAgIHNob3dQbGFubmVyRXN0aW1hdGU6IGZhbHNlLFxuICAgICAgICBzaG93VGFnczogdHJ1ZSxcbiAgICAgICAgaGlnaGxpZ2h0VHlwZTogSGlnaGxpZ2h0VHlwZS5OT05FLFxuICAgICAgICB2aWV3TW9kZTogVmlld01vZGUuRlVMTFxuICAgIH07XG5cbiAgICBzaG93UGxhbm5lckVzdGltYXRlOiBib29sZWFuID0gdHJ1ZTtcbiAgICBzaG93TWVudTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgaGlnaGxpZ2h0VHlwZXMgPSBIaWdobGlnaHRUeXBlOyAvLyBleHBvc2luZyB0aGUgZW51bSB0byB0aGUgdmlld1xuICAgIHZpZXdNb2RlcyA9IFZpZXdNb2RlO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfcGxhblNlcnZpY2U6IFBsYW5TZXJ2aWNlLCByb3V0ZVBhcmFtczogUm91dGVQYXJhbXMpIHtcbiAgICAgICAgdGhpcy5pZCA9IHJvdXRlUGFyYW1zLmdldCgnaWQnKTtcbiAgICB9XG5cbiAgICBnZXRQbGFuKCkge1xuICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGxhbiA9IHRoaXMuX3BsYW5TZXJ2aWNlLmdldFBsYW4odGhpcy5pZCk7XG4gICAgICAgIHRoaXMucm9vdENvbnRhaW5lciA9IHRoaXMucGxhbi5jb250ZW50O1xuICAgICAgICB0aGlzLnBsYW4ucGxhblN0YXRzID0ge1xuICAgICAgICAgICAgZXhlY3V0aW9uVGltZTogdGhpcy5yb290Q29udGFpbmVyWydFeGVjdXRpb24gVGltZSddIHx8IHRoaXMucm9vdENvbnRhaW5lclsnVG90YWwgUnVudGltZSddLFxuICAgICAgICAgICAgcGxhbm5pbmdUaW1lOiB0aGlzLnJvb3RDb250YWluZXJbJ1BsYW5uaW5nIFRpbWUnXSB8fCAwLFxuICAgICAgICAgICAgbWF4Um93czogdGhpcy5yb290Q29udGFpbmVyW3RoaXMuX3BsYW5TZXJ2aWNlLk1BWElNVU1fUk9XU19QUk9QXSB8fCAwLFxuICAgICAgICAgICAgbWF4Q29zdDogdGhpcy5yb290Q29udGFpbmVyW3RoaXMuX3BsYW5TZXJ2aWNlLk1BWElNVU1fQ09TVFNfUFJPUF0gfHwgMCxcbiAgICAgICAgICAgIG1heER1cmF0aW9uOiB0aGlzLnJvb3RDb250YWluZXJbdGhpcy5fcGxhblNlcnZpY2UuTUFYSU1VTV9EVVJBVElPTl9QUk9QXSB8fCAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZ2V0UGxhbigpO1xuICAgIH1cblxuICAgIHRvZ2dsZUhpZ2hsaWdodCh0eXBlOiBIaWdobGlnaHRUeXBlKSB7XG4gICAgICAgIHRoaXMudmlld09wdGlvbnMuaGlnaGxpZ2h0VHlwZSA9IHR5cGU7XG4gICAgfVxuXG4gICAgYW5hbHl6ZVBsYW4oKSB7XG4gICAgICAgIHRoaXMuX3BsYW5TZXJ2aWNlLmFuYWx5emVQbGFuKHRoaXMucGxhbik7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9